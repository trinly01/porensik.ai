(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t){},1:function(e,t,n){e.exports=n("2f39")},2:function(e,t){},"2f39":function(e,t,n){"use strict";n.r(t);var a=n("967e"),s=n.n(a),o=(n("96cf"),n("fa84")),r=n.n(o),i=(n("5c7d"),n("7d6e"),n("e54f"),n("573e"),n("44391"),n("4605"),n("f580"),n("5b2b"),n("2967"),n("7e67"),n("d770"),n("dd82"),n("922c"),n("c32e"),n("a151"),n("8bc7"),n("d67f"),n("880e"),n("1c10"),n("9482"),n("e797"),n("4848"),n("e9fd"),n("195c"),n("64e9"),n("33c5"),n("4f62"),n("0dbc"),n("4953"),n("81db"),n("2e52"),n("22485"),n("e592"),n("70ca"),n("2318"),n("24bd"),n("8f27"),n("3064"),n("c9a2"),n("8767"),n("4a8e"),n("b828"),n("3c1c"),n("21cb"),n("c00e"),n("e4a8"),n("e4d3"),n("f4d9"),n("b794"),n("af24"),n("7c9c"),n("7bb2"),n("64f7"),n("c382"),n("f5d1"),n("3cec"),n("c00ee"),n("d450"),n("ca07"),n("14e3"),n("1dba"),n("674a"),n("de26"),n("6721"),n("25e9"),n("fc83"),n("98e5"),n("605a"),n("ba60"),n("df07"),n("7903"),n("e046"),n("58af"),n("7713"),n("0571"),n("3e27"),n("6837"),n("3fc9"),n("0693"),n("bf41"),n("62f2"),n("7e6d"),n("2b0e")),l=n("b05d"),u=n("4d5a"),c=n("9898"),d=n("f2cc"),p=n("c7a0"),f=n("2ea3"),m=n("65c6"),v=n("6ac5"),h=n("9c40"),b=n("0016"),g=n("497d"),y=n("6ab5"),q=n("033f"),w=n("e208"),_=n("27f9"),x=n("2c91"),j=n("068f"),k=n("cb32"),$=n("4983"),C=n("7f41"),D=n("ead5"),S=n("079eb"),R=n("eb85"),Q=n("f09f"),P=n("a370"),T=n("4b7e"),I=n("429b"),O=n("7460"),F=n("7867"),z=n("7cbe"),A=n("4e73"),M=n("24e8"),Y=n("ddd8"),N=n("b047"),E=n("58a8"),L=n("adad"),V=n("823b"),U=n("ef35"),B=n("8380"),H=n("6f48"),W=n("ee89"),G=n("639d"),J=n("6ac0"),K=n("05c0"),X=n("d66b"),Z=n("c859"),ee=n("9564"),te=n("3786"),ne=n("8f8e"),ae=n("07d0"),se=n("daf4"),oe=n("8572"),re=n("24a7"),ie=n("0378"),le=n("eaac"),ue=n("357e"),ce=n("bd08"),de=n("db86"),pe=n("3845"),fe=n("714f"),me=n("7f67"),ve=n("2a19"),he=n("436b"),be=n("f508");i["a"].use(l["a"],{config:{},components:{QLayout:u["a"],QHeader:c["a"],QDrawer:d["a"],QPageContainer:p["a"],QPage:f["a"],QToolbar:m["a"],QToolbarTitle:v["a"],QBtn:h["a"],QIcon:b["a"],QList:g["a"],QItem:y["a"],QItemSection:q["a"],QItemLabel:w["a"],QInput:_["a"],QSpace:x["a"],QImg:j["a"],QAvatar:k["a"],QScrollArea:$["a"],QTree:C["a"],QBreadcrumbs:D["a"],QBreadcrumbsEl:S["a"],QSeparator:R["a"],QCard:Q["a"],QCardSection:P["a"],QCardActions:T["a"],QTabs:I["a"],QTab:O["a"],QRouteTab:F["a"],QPopupProxy:z["a"],QMenu:A["a"],QDialog:M["a"],QSelect:Y["a"],QChip:N["a"],QBadge:E["a"],QTabPanels:L["a"],QTabPanel:V["a"],QInfiniteScroll:U["a"],QSpinnerDots:B["a"],QBtnToggle:H["a"],QUploader:W["a"],QParallax:G["a"],QVideo:J["a"],QTooltip:K["a"],QEditor:X["a"],QDate:Z["a"],QToggle:ee["a"],QRadio:te["a"],QCheckbox:ne["a"],QFooter:ae["a"],QRating:se["a"],QField:oe["a"],QTime:re["a"],QForm:ie["a"],QTable:le["a"],QTh:ue["a"],QTr:ce["a"],QTd:de["a"],QKnob:pe["a"]},directives:{Ripple:fe["a"],ClosePopup:me["a"]},plugins:{Notify:ve["a"],Dialog:he["a"],Loading:be["a"]}});var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},ye=[],qe={name:"App"},we=qe,_e=n("2877"),xe=Object(_e["a"])(we,ge,ye,!1,null,null,null),je=xe.exports,ke=n("8c4f");n("e514")();var $e=[{path:"/",component:function(){return Promise.all([n.e("27ddf2da"),n.e("1cdb35ae")]).then(n.bind(null,"f241"))},children:[{path:"",component:function(){return n.e("251c1e51").then(n.bind(null,"8b24"))}},{path:"mydrive/:_id",component:function(){return Promise.all([n.e("27ddf2da"),n.e("05ab4153"),n.e("e4e3e832")]).then(n.bind(null,"194b"))}},{path:"trash",component:function(){return n.e("6d59753f").then(n.bind(null,"5c2e"))}},{path:"shared",component:function(){return Promise.all([n.e("27ddf2da"),n.e("05ab4153"),n.e("ed864002")]).then(n.bind(null,"c613"))}}]}];$e.push({path:"*",component:function(){return n.e("4b47640d").then(n.bind(null,"e51e"))}});var Ce=$e;i["a"].use(ke["a"]);var De=function(){var e=new ke["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:Ce,mode:"hash",base:""});return e},Se=function(){var e="function"===typeof De?De({Vue:i["a"]}):De,t={el:"#q-app",router:e,render:function(e){return e(je)}};return{app:t,router:e}},Re=n("a925"),Qe={failed:"Action failed",success:"Action was successful"},Pe={"en-us":Qe},Te=function(){var e=r()(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.app,a=t.Vue,a.use(Re["a"]),n.i18n=new Re["a"]({locale:"en-us",fallbackLocale:"en-us",messages:Pe});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ie=n("bc3a"),Oe=n.n(Ie),Fe=function(){var e=r()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.prototype.$axios=Oe.a;case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ze=(n("34ef"),n("1146")),Ae=n.n(ze),Me=n("21a6"),Ye=n("c93d"),Ne=n("df45"),Ee=n.n(Ne),Le=n("6821f"),Ve=n.n(Le),Ue=n("57f0"),Be=n.n(Ue),He=n("88ad"),We=n.n(He),Ge=n("1d4e"),Je=n.n(Ge),Ke=n("e552"),Xe=n("c1df"),Ze=n.n(Xe),et=n("310e"),tt=n.n(et),nt=n("612d"),at=n("2ef0"),st=n("a4af").default,ot={round:at["round"],meanBy:at["meanBy"],ceil:nt["ceil"],transform:nt["transform"],isEqual:nt["isEqual"],isObject:nt["isObject"],findIndex:at["findIndex"],cloneDeep:at["cloneDeep"],reverse:nt["reverse"],isEmpty:nt["isEmpty"],isArray:nt["isArray"],isImage:Be.a,isVideo:We.a,isAudio:Je.a,md5:Ve.a},rt=nt["transform"].convert({cap:!1}),it=n("7fd4");ot.printElem=it;var lt=function(e){return function(t,n,a){if(!Object(nt["isEqual"])(n,e[a])){var s=Object(nt["isObject"])(n)&&Object(nt["isObject"])(e[a]);t[a]=!0===s?ut(n,e[a]):n}}};function ut(e,t){return rt(lt(t),null,e)}var ct={_id:"My Drive",label:"My Drive",parentFolder:"My Drive",userId:"",security:{public:!1,viewers:[],uploaders:[],modifiers:[],removers:[],folderCreators:[],approvers:[]},isFolder:!0,fileVersions:[],logs:[],extras:{}},dt=Object(at["cloneDeep"])(ct);dt.isFolder=!1;var pt=Object(at["cloneDeep"])(ct);pt.isFolder=!1,pt.type="form",pt.label="",pt.details="";var ft={type:"text",value:"",isRequired:!1};pt.format=[Object(at["cloneDeep"])(ft)];var mt={jwt:"",global:{},user:!1,folders:[],files:[],notifs:[],newNotifs:0,currentFolder:ct,clickedItem:ct,nodeFormat:ct,fileFormat:dt,formFormat:pt,path:[ct]},vt=function(){var e=r()(s.a.mark(function e(t){var n,a,o;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.app,t.router,a=t.Vue,a.prototype.$Vue=a,a.prototype.$config=a.config,a.prototype.$arrayToCSV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now()+".csv",n=Ae.a,a=n.utils.json_to_sheet(e),s=n.utils.sheet_to_csv(a);function o(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0;a!==e.length;++a)n[a]=255&e.charCodeAt(a);return t}Object(Me["saveAs"])(new Blob([o(s)],{type:"application/octet-stream"}),t)},a.prototype.$xlsx=Ae.a,a.use(Ee.a),a.component("draggable",tt.a),a.component("view-form",Ye["a"]),n.data=mt,a.prototype.$log=console.log,a.prototype.$timeout=function(e,t){return setTimeout(e,t)},o="http://localhost:3232",a.prototype.$host=o,a.prototype.$dbCon=st(o),a.prototype.$sso=st("http://localhost:3536",{users:{}}),a.prototype.$sso.service("users"),a.prototype.$sso.authenticate({strategy:"local",email:"3364@mail.com",password:"3364"}),a.prototype.$deepDiff=ut,a.prototype.$moment=Ze.a,a.prototype.$lodash=ot,a.prototype.$beautify=Ke["js"];case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ht=Se(),bt=ht.app,gt=ht.router;function yt(){return qt.apply(this,arguments)}function qt(){return qt=r()(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=[Te,Fe,vt],n=0;case 2:if(!(n<t.length)){e.next=20;break}if("function"===typeof t[n]){e.next=5;break}return e.abrupt("continue",17);case 5:return e.prev=5,e.next=8,t[n]({app:bt,router:gt,Vue:i["a"],ssrContext:null});case 8:e.next=17;break;case 10:if(e.prev=10,e.t0=e["catch"](5),!e.t0||!e.t0.url){e.next=15;break}return window.location.href=e.t0.url,e.abrupt("return");case 15:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 17:n++,e.next=2;break;case 20:new i["a"](bt);case 21:case"end":return e.stop()}},e,null,[[5,10]])})),qt.apply(this,arguments)}yt()},3:function(e,t){},"3da2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{staticClass:"bg-white text-black",staticStyle:{"min-width":"80vw"},attrs:{container:""}},[n("q-header",{staticClass:"bg-white text-black shadow-up-1"},[n("q-toolbar",{},[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"data_usage",color:"purple"}}),n("q-toolbar-title",[e._v("Responses")]),n("q-toolbar-title",[n("i",{staticClass:"text-body1"},[e._v(e._s(e.node.label))])]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),n("q-page-container",{ref:"printable",staticClass:"q-pa-lg col"},[n("div",{staticClass:"q-pt-lg col"},[e.responsesSrvc&&"list"===e.tab?n("q-table",{attrs:{data:e.responses,columns:e.columns,"row-key":"_id",pagination:e.pagination,loading:e.loading,"binary-state-sort":""},on:{"update:pagination":[function(t){e.pagination=t},e.customSort]},scopedSlots:e._u([{key:"body",fn:function(t){return[n("tr",{on:{mouseover:function(n){e.hover=t.row._id}}},[e._l(e.node.format,function(a){return n("td",{key:a.field,staticClass:"text-right",attrs:{props:t}},[t.row[a.field]?n("div",["Text"===a.type||"Text"===a.type.value?n("span",[e._v("\n                  "+e._s(t.row[a.field])+"\n                ")]):"Select"===a.type.value?n("div",[a.isMultiple?e._l(t.row[a.field],function(e,a){return n("q-chip",{key:t.row._id+a,staticClass:"text-white",attrs:{label:e.value,dense:"",color:"purple"}})}):n("span",[e._v(" "+e._s(t.row[a.field].value)+" ")])],2):"Date"===a.type.value?n("span",[e._v("\n                  "+e._s(e.$moment(t.row[a.field]).format("YYYY-MM-DD"))+"\n                ")]):"digiSign"===a.type.value?n("span",[e._v("\n                  "+e._s(t.row[a.field].displayName)+" "),n("br"),e._v("\n                  "+e._s(t.row[a.field].datetime?e.$moment(t.row[a.field].datetime).format("YYYY-MM-DD"):"")+"\n                ")]):n("div",[e._v("\n                  "+e._s(t.row[a.field])+"\n                ")])]):e._e()])}),n("td",[t.row._id===e.hover?n("div",{staticClass:"q-gutter-sm"},[n("q-btn",{staticClass:"text-black",attrs:{icon:"fas fa-qrcode",color:"white",size:"sm",round:""},on:{click:function(){return e.$refs["qr"+t.row._id].show()}}},[n("qrEncrypt",{ref:"qr"+t.row._id,attrs:{value:t.row}})],1),n("q-btn",{attrs:{icon:"remove_red_eye",color:"purple",size:"sm",round:""},on:{click:function(n){return e.openResponse(t.row)}}}),n("q-btn",{attrs:{icon:"delete",color:"negative",size:"sm",round:""},on:{click:function(n){return e.removeResponse(t.row)}}})],1):e._e()])],2)]}},{key:"top-right",fn:function(){return[n("q-input",{attrs:{borderless:"",dense:"",debounce:"750",placeholder:"Search"},on:{input:function(t){return e.customSort(e.pagination)}},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"bottom",fn:function(){return[n("div",{staticClass:"col"},[e._v("\n            Total records: "+e._s(e.responsesSrvc.total)+"\n          ")]),n("div",{staticClass:"row q-gutter-sm items-center"},[n("q-btn",{attrs:{disabled:1===e.responsesSrvc.page,round:"",icon:"chevron_left",flat:"",size:"sm"},on:{click:function(t){return e.responsesSrvc.loadPage(e.responsesSrvc.page-1)}}}),n("div",[e._v("\n              page "+e._s(e.responsesSrvc.page)+" of "+e._s(e.$lodash.ceil(e.responsesSrvc.total/e.responsesSrvc.limit))+"\n            ")]),n("q-btn",{attrs:{disabled:e.responsesSrvc.page===e.$lodash.ceil(e.responsesSrvc.total/e.responsesSrvc.limit),round:"",icon:"chevron_right",flat:"",size:"sm"},on:{click:function(t){return e.responsesSrvc.loadPage(e.responsesSrvc.page+1)}}})],1)]},proxy:!0}],null,!1,686008772)}):e.responsesSrvc&&"stat"===e.tab?n("stat",{attrs:{node:e.node}}):e._e()],1)]),n("q-footer",[n("q-toolbar",{staticClass:"bg-white text-black shadow-1"},[n("q-btn",{attrs:{size:"md",flat:"",color:"purple",label:"download",icon:"fas fa-file-csv"},on:{click:e.exportCSV}}),n("q-toolbar-title"),this.$root.user._id===e.node.owner||e.$lodash.findIndex(e.node.security.modifiers,function(t){return t.value._id===e.$root.user._id})>-1?n("q-btn-toggle",{staticClass:"bg-grey-3",attrs:{rounded:"",unelevated:"","toggle-color":"purple","text-color":"purple",options:[{label:"List",value:"list",icon:"list"},{label:"Stat",value:"stat",icon:"insert_chart_outlined"}]},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}):e._e()],1)],1),n("q-dialog",{attrs:{if:"viewFormIsOpen",persistent:""},model:{value:e.viewFormIsOpen,callback:function(t){e.viewFormIsOpen=t},expression:"viewFormIsOpen"}},[n("view-form",{attrs:{node:e.node,response:e.response}})],1)],1)},s=[],o=n("967e"),r=n.n(o),i=(n("7514"),n("96cf"),n("fa84")),l=n.n(i),u=(n("20d6"),n("c93d")),c=n("7e0a"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"qDialog"},[n("q-layout",{staticClass:"bg-white text-black",staticStyle:{"min-width":"80vw"},attrs:{container:""}},[n("q-header",{staticClass:"bg-white text-black shadow-up-1"},[n("q-toolbar",{},[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"fas fa-file-signature",color:"purple"}}),n("q-toolbar-title",[e._v("QRTransfer")]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),n("q-page-container",{staticClass:"col"},[n("div",{staticClass:"row"},[n("q-input",{attrs:{type:"password",label:"secret key"}}),n("q-btn",{attrs:{label:"generate QR"},on:{click:e.generate}})],1),e._v("\n      "+e._s(e.enc)+"\n      "),e.enc?n("vue-qr",{attrs:{text:e.enc,size:300,margin:8}}):e._e()],1),n("q-footer",[n("q-toolbar",{staticClass:"bg-white text-black shadow-1"},[n("q-toolbar-title"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),e.value?n("q-btn",{attrs:{color:"purple",label:"Save"}}):e._e()],1)],1)],1)],1)},p=[],f=n("658f"),m=n.n(f),v=n("8b54"),h={props:["value"],components:{VueQr:m.a},beforeDestroy:function(){},mounted:function(){},data:function(){return{enc:"",secret:""}},methods:{show:function(){this.$refs.qDialog.show()},generate:function(){this.enc=v.compress(JSON.stringify(this.value))}}},b=h,g=(n("f070"),n("2877")),y=Object(g["a"])(b,d,p,!1,null,null,null),q=y.exports,w={props:["refs","node","userID"],components:{viewForm:u["a"],stat:c["a"],qrEncrypt:q},beforeDestroy:function(){this.responsesSrvc.destroy()},mounted:function(){var e=this;this.loading=!0,this.responsesSrvc=this.$dbCon.wingsService("juan-responses").on("dataChange",function(t){e.responses=t,console.log(t,e.responsesSrvc.total),e.loading=!1}),this.customSort({pagination:this.pagination})},computed:{columns:function(){var e=this.node.format.map(function(e){return{name:e.field,label:e.field,field:e.field,sortable:!0}});return Array.prototype.push.apply(e,[{name:"form-action",label:"",field:"form-action"}]),e}},data:function(){return{tab:"list",viewFormIsOpen:!1,response:{},hover:null,responsesSrvc:null,responses:[],loading:!1,filter:"",page:1,pagination:{sortBy:this.node.format[0].field,descending:!1,page:1,rowsPerPage:10}}},methods:{customSort:function(e){var t=this;console.log("triggered",e);var n=e.sortBy,a=e.descending;this.loading=!0;var s={paginate:!0,channels:[{prop:"formID",value:this.node._id}]},o={query:{formID:this.node._id,$search:this.$root.user._id}};if(this.userID&&(o.query.$or=[{userID:this.userID}],console.log("format",this.node.format),this.node.format.map(function(e){if(e.type.value&&"digiSign"===e.type.value){console.log(e.type.value);var n={};n["".concat(e.field,".assignedTo.value._id")]=t.userID,o.query.$or.push(n),s.channels.push({prop:"".concat(e.field,".assignedTo.value._id"),value:t.userID})}}),s.channels.push({prop:"userID",value:this.userID}),this.$lodash.findIndex(this.node.security.modifiers,function(e){return e.value._id===t.userID})>-1&&(delete o.query.$or,delete o.query.$search)),this.filter&&(o.query.$search=this.filter),n){var r={};r[n]=a?-1:1,o.query.$sort=r}this.query={params:o,config:s},console.log("params",o),this.responsesSrvc.reset(o,s),console.log("sortBy",o)},exportCSV:function(){var e=l()(r.a.mark(function e(){var t,n,a,s=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.query.params.query.$limit=500,e.next=4,this.responsesSrvc.find(this.query.params);case 4:n=e.sent,a=n.data,a.map(function(e){var n={dateSubmitted:s.$moment(e.dateSubmitted).format("YYYY-MM-DD")};s.node.format.map(function(t){"Select"===t.type.value?n[t.field]=t.isMultiple?e[t.field].map(function(e){return e.value}).join(", "):e[t.field].value:"digiSign"===t.type.value?(n["".concat(t.field," - Signer")]=e[t.field].displayName,n["".concat(t.field," - date")]=s.$moment(e[t.field].datetime).format("YYYY-MM-DD")):"Date"===t.type.value?n[t.field]=s.$moment(e[t.field]).format("YYYY-MM-DD"):n[t.field]=e[t.field]}),t.push(n)}),this.$arrayToCSV(t,this.node.label+" - "+Date.now()+".csv");case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openResponse:function(e){this.response=e,this.viewFormIsOpen=!0},removeResponse:function(e){var t=this;this.$q.dialog({title:"Approval Authentication",html:!0,message:"Are you sure you want to delete <b>"+e._id+"</b>? <br> Enter Password",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk(function(){var n=l()(r.a.mark(function n(a){return r.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return console.log(">>>> OK, received",a),n.prev=1,n.next=4,t.$axios.post(t.$dbCon.io.io.uri+"/authentication",{email:t.$root.user.email,password:a,strategy:"sso"});case 4:t.responsesSrvc.remove(e._id),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.$q.notify({message:"Wrong Password",position:"bottom",color:"negative"});case 10:case"end":return n.stop()}},n,null,[[1,7]])}));return function(e){return n.apply(this,arguments)}}())}}},_=w,x=Object(g["a"])(_,a,s,!1,null,"1c74de8c",null);t["a"]=x.exports},4:function(e,t){},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=o,e.exports=s,s.id="4678"},4912:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-menu",{ref:"qMenu",attrs:{anchor:"top right",self:"bottom middle"},on:{show:function(){return e.$refs.password.select()}}},[n("q-card",{staticStyle:{width:"300px"}},[n("q-card-section",{staticClass:"row"},[e.signHandler?n("div",{staticClass:"text-h6 col"},[e._v("DigiSign")]):n("div",{staticClass:"text-h6 col"},[e._v("Approve Document")]),n("div")]),n("q-card-section",{staticClass:"col"},[e.node?n("div",{staticClass:"row"},e._l(e.node.security.approvers.map(function(e){return Object.assign({},{approved:!1},e)}),function(t){return n("q-chip",{key:t._id,attrs:{dense:""}},[n("q-avatar",{attrs:{icon:t.approved?"thumb_up":"watch_later",color:t.approved?"secondary":"grey","text-color":"white"}}),e._v("\r\n          "+e._s(t.label)+"\r\n        ")],1)}),1):e._e(),n("q-input",{ref:"password",attrs:{dense:"",rounded:"",outlined:"",error:e.isWrongPass,type:e.isPwd?"password":"text"},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.signHandler?e.sign():e.approve()}},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isWrongPass,expression:"isWrongPass"}],staticClass:"q-field__bottom text-negative",staticStyle:{position:"relative",bottom:"20px"}},[e._v("Wrong-Password")])],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),e.signHandler?n("q-btn",{attrs:{loading:e.loading,color:"primary",label:"Sign",disabled:!e.password},on:{click:e.sign}}):n("q-btn",{attrs:{loading:e.loading,color:"primary",label:"Approve",disabled:!e.password},on:{click:e.approve}})],1)],1)],1)},s=[],o=(n("20d6"),n("967e")),r=n.n(o),i=(n("96cf"),n("fa84")),l=n.n(i),u={props:["node","signHandler"],data:function(){return{password:"",isPwd:!0,isWrongPass:!1,loading:!1}},methods:{sign:function(){var e=l()(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("signing..."),this.loading=!0,e.prev=2,e.next=5,this.$axios.post(this.$dbCon.io.io.uri+"/authentication",{strategy:"sso",email:this.$root.user.email,password:this.password});case 5:this.loading=!1,this.signHandler(!0),this.$refs.qMenu.hide(),e.next=19;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error(e.t0),this.loading=!1,this.isWrongPass=!0,this.$refs.password.select(),this.$forceUpdate(),setTimeout(function(){t.isWrongPass=!1},5e3),this.signHandler(!1);case 19:case"end":return e.stop()}},e,this,[[2,10]])}));function t(){return e.apply(this,arguments)}return t}(),approve:function(){var e=l()(r.a.mark(function e(){var t,n,a,s=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.post(this.$dbCon.io.io.uri+"/authentication",{strategy:"sso",email:this.$root.user.email,password:this.password});case 4:t=e.sent,console.log("asdasda",t),n=this.$lodash.findIndex(this.node.security.approvers,function(e){return e.value._id===s.$root.user._id}),a={},a["security.approvers.".concat(n,".approved")]=!0,this.loading=!1,this.$dbCon.services["juan-files"].patch(this.node._id,a),e.next=19;break;case 13:e.prev=13,e.t0=e["catch"](1),console.error(e.t0),this.loading=!1,this.isWrongPass=!0,setTimeout(function(){s.isWrongPass=!1},5e3);case 19:case"end":return e.stop()}},e,this,[[1,13]])}));function t(){return e.apply(this,arguments)}return t}()}},c=u,d=n("2877"),p=Object(d["a"])(c,a,s,!1,null,null,null);t["a"]=p.exports},"54ba":function(e,t,n){},"7e0a":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.timestamp,staticClass:"row q-pa-md q-gutter-sm justify-center"},e._l(e.charts,function(t,a){return n("div",{key:"quegdhfgjgf"+a,staticClass:"col",staticStyle:{"min-width":"300px"}},[n("div",{staticClass:"row justify-center"},[e._v("\n       "+e._s(t.field)+"\n     ")]),t.stat&&["Number","Rating"].includes(t.type.value)?n("div",{staticClass:"row justify-center"},[n("q-knob",{staticClass:"text-secondary q-ma-md",attrs:{readonly:"",max:t.stat.max,"show-value":"",size:"120px",thickness:.22,color:"secondary","track-color":"grey-3"},model:{value:t.stat.min,callback:function(n){e.$set(t.stat,"min",n)},expression:"que.stat.min"}},[n("div",{staticClass:"column items-center"},[n("div",{staticClass:"text-h5"},[e._v(e._s(t.stat.min))]),n("div",{staticClass:"text-caption"},[e._v("min")])])]),n("q-knob",{staticClass:"text-primary q-ma-md",attrs:{readonly:"",max:t.stat.max,"show-value":"",size:"120px",thickness:.22,color:"primary","track-color":"grey-3"},model:{value:t.stat.max,callback:function(n){e.$set(t.stat,"max",n)},expression:"que.stat.max"}},[n("div",{staticClass:"column items-center"},[n("div",{staticClass:"text-h5"},[e._v(e._s(t.stat.max))]),n("div",{staticClass:"text-caption"},[e._v("max")])])]),n("q-knob",{staticClass:"text-warning q-ma-md",attrs:{readonly:"",max:t.stat.max,"show-value":"",size:"120px",thickness:.22,color:"warning","track-color":"grey-3"},model:{value:t.stat.mean,callback:function(n){e.$set(t.stat,"mean",n)},expression:"que.stat.mean"}},[n("div",{staticClass:"column items-center"},[n("div",{staticClass:"text-h5"},[e._v(e._s(t.stat.mean))]),n("div",{staticClass:"text-caption"},[e._v("ave")])])])],1):t.stat&&"Select"===t.type.value?n("div",{staticClass:"row justify-center",staticStyle:{"min-width":"300px"}},[n("GChart",{staticStyle:{height:"300px"},attrs:{type:"PieChart",data:t.stat.data,options:{legend:"labeled",pieHole:.5,animation:{startup:!0,duration:1e3,easing:"inAndOut"}}}})],1):e._e()])}),0)},s=[],o=n("967e"),r=n.n(o),i=(n("7514"),n("6762"),n("2fdb"),n("551c"),n("ac6a"),n("cadf"),n("06db"),n("5df3"),n("96cf"),n("fa84")),l=n.n(i),u=n("cb43"),c={props:["node"],components:{GChart:u["GChart"]},beforeDestroy:function(){this.responseSrvc.destroy()},mounted:function(){var e=this;this.responseSrvc=this.$dbCon.wingsService("juan-responses").on("dataChange",function(t){e.query()}).init()},data:function(){return{timestamp:Date.now(),charts:[]}},methods:{query:function(){var e=l()(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.node.format.filter(function(e){return e.type.value&&["Number","Rating","Select"].includes(e.type.value)}).map(function(){var e=l()(r.a.mark(function e(n){var a,s,o,i,u;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!["Number","Rating"].includes(n.type.value)){e.next=19;break}return a={formID:t.node._id,$sort:{},$limit:1},a.$sort[n.field]=1,e.next=5,t.responseSrvc.find({query:a});case 5:return s=e.sent,a.$sort[n.field]=-1,e.next=9,t.responseSrvc.find({query:a});case 9:return o=e.sent,a.$select=[n.field],a.$limit=500,e.next=14,t.responseSrvc.find({query:a});case 14:i=e.sent,console.log("mean",i),n.stat={min:s.data?s.data[0][n.field]:"n/a",max:o.data?o.data[0][n.field]:"n/a",mean:i.data?t.$lodash.round(t.$lodash.meanBy(i.data,n.field),2):"n/a"},e.next=25;break;case 19:if("Select"!==n.type.value){e.next=25;break}return u=[["option","count"]],e.next=23,Promise.all(n.options.map(function(){var e=l()(r.a.mark(function e(a){var s,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s={formID:t.node._id,$limit:0},s[n.field+".value"]=a.value,e.next=4,t.responseSrvc.find({query:s});case 4:o=e.sent,u.push([a.value,o.total]),console.log("TRINMAR",s);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 23:console.log("Pogi si timi asd",u),n.stat={data:u};case 25:return t.timestamp=Date.now(),e.abrupt("return",n);case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:this.charts=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},d=c,p=n("2877"),f=Object(p["a"])(d,a,s,!1,null,null,null);t["a"]=f.exports},"7e6d":function(e,t,n){},a4af:function(e,t,n){"use strict";n.r(t);n("5df3"),n("1c4c"),n("20d6");var a=n("967e"),s=n.n(a),o=(n("f751"),n("7514"),n("96cf"),n("fa84")),r=n.n(o),i=(n("6b54"),n("06db"),n("28a5"),n("8055")),l=n.n(i),u=n("891e"),c=n.n(u),d=n("faa1"),p=n.n(d),f=n("2ef0"),m=c.a.authentication,v=c.a.socketio;t["default"]=function(e){e=e||"http://localhost:3030";var t=l()(e),n=c()();return n.configure(v(t,{timeout:18e4})).configure(m({timeout:18e4,jwtStrategy:"jwt",entity:"user",service:"users",cookie:e+"-jwt",storageKey:e+"-jwt",storage:window.localStorage})),n.wingsService=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.query||(t.query={});var o=new p.a,i=n.service(e),l={service:i,query:t,total:0,data:[],skip:0,page:1,limit:10,channels:a.channels||[],debug:a.debug||!1,newDataPosition:a.newDataPosition||"end",paginate:a.paginate||!1,reset:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.total=0,l.data=[],l.skip=0,l.page=1,l.limit=10,l.query=t||l.query,l.query.query||(l.query.query={}),l.channels=n.channels||l.channels,l.debug=n.debug||l.debug,l.newDataPosition=n.newDataPosition||l.newDataPosition,l.paginate=n.paginate||l.paginate,l.log("".concat(e,".reset"),l.query),l.init()},log:function(){var e,t="\n        display: inline-block;\n        padding: 0 10px;\n        height: 50px;\n        line-height: 20px;\n        border-radius: 25px;\n        background-color: #FF5722;\n        color: white;\n        font-weight: bold;\n      ",n="%c".concat(arguments[0]);Array.prototype.shift.apply(arguments);var a=new Error,s=a.stack.toString().split("\n"),o=s[2].split("?!."),r=o[o.length-1].split("?")[0].split("///.");r=1===r.length?r[0]:r[1].split(":")[0];var i=a.stack.split("\n");i[0]="Error",i.splice(1,1),i.splice(2,8),a.stack=i.join("\n"),l.debug&&(e=console).log.apply(e,[n,t,r,a,"\n"].concat(Array.prototype.slice.call(arguments)))},on:function(e,t){return o.on(e,function(){t.bind(l),t.apply(void 0,Array.prototype.slice.call(arguments).concat([l]))}),l.listener=t,l},destroy:function(){n.io.removeListener("connect",l.onConnect),n.removeListener("authenticated",l.onAuthenticated),n.removeListener("logout",l.onLogout),delete o._events},init:function(){return r()(s.a.mark(function t(){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.find(l.query);case 3:return n=t.sent,l=Object.assign(l,n),o.emit("dataChange",n.data),l.log("".concat(e,".init"),n),t.abrupt("return",l);case 10:t.prev=10,t.t0=t["catch"](0),l.log("".concat(e,".init"),t.t0),o.emit("dataChange",l.data);case 14:case"end":return t.stop()}},t,null,[[0,10]])}))(),l},find:function(){return i.find.apply(i,arguments)},get:function(){return i.get.apply(i,arguments)},create:function(){return i.create.apply(i,arguments)},update:function(){return i.update.apply(i,arguments)},patch:function(){return i.patch.apply(i,arguments)},remove:function(){return i.remove.apply(i,arguments)},inChannel:function(e){return!l.channels[0]||-1!==Object(f["findIndex"])(l.channels,function(t){var n=t.prop.split(".").reduce(function(e,t){return e[t]},e);return Object(f["isFunction"])(t.value)?t.value(n,e):t.value===n})}};return i.on("created",function(e){l.total+=1,l.inChannel(e)&&("end"===l.newDataPosition?(l.data.push(e),l.paginate&&l.data.length>l.limit&&l.data.shift()):(l.data.unshift(e),l.paginate&&l.data.length>l.limit&&l.data.pop()),o.emit("dataChange",l.data))}),l.findIndex=function(e){for(var t=-1,n=l.data.length,a=0;a<n;a+=1)if(l.data[a]._id===e._id){t=a;break}return t},l.removeItem=function(e){var t=l.data.length-1;while(e<t)l.data[e]=l.data[++e];l.data.pop()},i.on("removed",function(t){l.total-=1;var n=l.findIndex(t);if(-1!==n){l.removeItem(n);var a=l.data.length;l.paginate&&a>0&&a<l.limit&&l.loadPage(l.page),l.paginate&&0===a&&l.loadPage(l.page-1),l.log("".concat(e,".removed"),t,n),o.emit("dataChange",Array.from(l.data))}}),l.modifyData=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"patched",a=l.findIndex(t),s=l.inChannel(t);-1!==a&&s?l.data[a]=t:-1===a||s?-1===a&&s&&!l.paginate&&("end"===l.newDataPosition?l.data.push(t):l.data.unshift(t)):l.removeItem(a),o.emit("dataChange",Array.from(l.data)),l.log("".concat(e,".on.").concat(n),t,"index",a,"inChannel",s)},i.on("patched",function(e){l.modifyData(e)}),i.on("updated",function(e){l.modifyData(e,"updated")}),l.loadMore=r()(s.a.mark(function t(){var n,a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=Object(f["ceil"])(l.total/l.limit),!(l.page<=n)){t.next=10;break}return l.query.query.$skip=l.page*l.limit,t.next=5,i.find(l.query);case 5:a=t.sent,++l.page,l.data=Object(f["unionBy"])(l.data,a.data,"_id"),o.emit("dataChange",l.data),l.log("".concat(e,".loadMore"),a);case 10:case"end":return t.stop()}},t)})),l.loadAll=r()(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(f["ceil"])(l.total/l.limit),l.page===t){e.next=5;break}return e.next=4,l.loadMore();case 4:i.loadAll();case 5:case"end":return e.stop()}},e)})),l.loadPage=r()(s.a.mark(function t(){var n,a,r=arguments;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:1,l.paginate=!0,l.page=n,l.query.query.$skip=(l.page-1)*l.limit,t.next=6,i.find(l.query);case 6:a=t.sent,Object.assign(l,a),o.emit("dataChange",l.data),l.log("".concat(e,".loadPage"),a);case 10:case"end":return t.stop()}},t)})),l.onDisconnect=function(t){l.status="offline",l.log("".concat(e,".onDisconnect")),l.disconnectCallback&&l.disconnectCallback()},n.io.on("disconnect",l.onDisconnect),l.onConnect=function(t){l.log("".concat(e,".onConnect")),l.reset(),l.connectCallback&&l.connectCallback()},n.io.on("connect",l.onConnect),l.onLogout=function(){l.log("".concat(e,".onLogout")),l.reset()},n.on("logout",l.onLogout),l.onAuthenticated=function(){l.data.length&&(l.log("".concat(e,".onAuthenticated")),l.reset())},n.on("authenticated",l.onAuthenticated),l},n}},c93d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{staticClass:"bg-white text-black",staticStyle:{"min-width":"80vw"},attrs:{container:""}},[n("q-header",{staticClass:"bg-white text-black shadow-up-1"},[n("q-toolbar",{},[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"fas fa-file-signature",color:"purple"}}),n("q-toolbar-title",[e._v(e._s(e.node.label))]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1)],1),n("q-page-container",{ref:"printable",staticClass:"q-pa-lg col"},[n("q-form",{ref:"qForm"},[n("div",{staticClass:"q-pt-md q-ma-md",domProps:{innerHTML:e._s(e.node.details)}}),n("q-separator"),e.node.layout?n("span",{staticClass:"q-ma-md",domProps:{innerHTML:e._s(e.node.layout)}}):n("div",{staticClass:"col"},e._l(e.format,function(t,a){return n("div",{key:"que-"+a,staticClass:"col q-ma-md"},[n("juan-input",{attrs:{query:t,qi:a,node:e.node,response:e.response,hasResponse:e.hasResponse,format:e.format},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"que.value"}})],1)}),0)],1)],1),n("q-footer",[n("q-toolbar",{staticClass:"bg-white text-black shadow-1"},[n("q-btn",{attrs:{round:"",size:"md",flat:"",color:"purple",icon:"print"},on:{click:function(t){return e.$lodash.printElem(e.$refs.printable.$el)}}}),e.node.multipleResponse?n("q-btn",{attrs:{flat:"",color:"purple",label:"view your responses"},on:{click:function(t){e.responsesPrompt=!0}}},[n("q-dialog",{attrs:{if:"responsesPrompt",persistent:""},model:{value:e.responsesPrompt,callback:function(t){e.responsesPrompt=t},expression:"responsesPrompt"}},[n("juan-responses",{attrs:{node:e.node,userID:e.$root.user._id}})],1)],1):e._e(),n("q-toolbar-title"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),e.response?n("q-btn",{attrs:{disabled:!e.node.editableResponse,color:"purple",label:"Update"},on:{click:e.updateResponse}}):e.node.multipleResponse||!e.hasResponse?n("q-btn",{attrs:{color:"purple",label:"Submit"},on:{click:e.submit}}):n("q-btn",{attrs:{disabled:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse,color:"purple",label:"Update"},on:{click:e.updateResponse}})],1)],1)],1)},s=[],o=(n("06db"),n("967e")),r=n.n(o),i=(n("7514"),n("96cf"),n("fa84")),l=n.n(i),u=n("02fa"),c=n.n(u),d=n("d241"),p=n("3da2"),f={components:{juanInput:d["a"],juanResponses:p["a"]},props:["refs","node","response"],beforeDestroy:function(){this.responsesSrvc.destroy()},mounted:function(){var e=this;this.node.format.map(function(t,n){var a=document.querySelector("q"+n);if(console.log(a),a){var s=new e.$Vue(c()({},d["a"],{propsData:{node:e.node,query:t,"v-model":t.value,qi:n,response:{},hasResponse:!1,format:e.node.format,root:e.$root}}));s.$root=e.$root,s.$mount(a)}}),this.responsesSrvc=this.$dbCon.wingsService("juan-responses");var t=function(){var t=l()(r.a.mark(function t(){var n;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.responsesSrvc.find({query:{formID:e.node._id,userID:e.$root.user._id}});case 2:n=t.sent,n.data.length&&(e.responseFromDb=e.$lodash.cloneDeep(n.data[0]),e.hasResponse=!0,e.node.multipleResponse||e.format.map(function(t){t.value=t.type.value&&"Date"===t.type.value?e.$moment(n.data[0][t.field]).format("YYYY/MM/DD"):n.data[0][t.field]}));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();this.response?this.format.map(function(t){t.value=t.type.value&&"Date"===t.type.value?e.$moment(e.response[t.field]).format("YYYY/MM/DD"):e.response[t.field]}):t()},data:function(){return{searchedUsers:[],format:this.$lodash.cloneDeep(this.node.format),responsesPrompt:!1,hasResponse:!1,buttonSubmit:null,buttonSave:null,responseID:null}},methods:{sign:function(e){var t={};this.format.filter(function(e){return e.type.value&&"digiSign"!==e.type.value}).map(function(e){t[e.field]=e.value}),console.log(t);var n=Date.now();e.value={assignedTo:e.value.assignedTo,datetime:n,userId:this.$root.user._id,email:this.$root.user.personal_information.email,displayName:"".concat(this.$root.user.personal_information.first_name," ").concat(this.$root.user.personal_information.surname),hash:this.$lodash.md5(t.toString()+n+this.$root.user._id)},console.log(e.value),this.response&&this.response._id&&this.updateResponse()},submit:function(){var e=l()(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.qForm.validate();case 2:if(t=e.sent,n={formID:this.node._id,userID:this.$root.user._id,dateSubmitted:Date.now()},!t){e.next=13;break}return this.format.map(function(e){"Date"===e.type.value?n[e.field]=new Date(e.value).getTime():n[e.field]=e.value}),console.log("juanData",this.format),e.next=9,this.responsesSrvc.create(n);case 9:a=e.sent,this.hasResponse=!0,this.responseID=a._id,this.$q.notify({message:"Response Submitted",position:"bottom-right",color:"positive"});case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateResponse:function(){var e=l()(r.a.mark(function e(){var t,n,a,s,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.qForm.validate();case 2:if(t=e.sent,n=Date.now(),a={},!t){e.next=17;break}return a=this.$lodash.cloneDeep(this.response||this.responseFromDb),this.format.map(function(e){"Date"===e.type.value?a[e.field]=new Date(e.value).getTime():a[e.field]=e.value}),s={action:"Modified",timestamp:n,data:{old:this.$deepDiff(this.response,a),new:this.$deepDiff(a,this.response||this.responseFromDb)},user:this.$root.user},a.$push={logs:s},console.log("log",a),e.next=13,this.responsesSrvc.patch(a._id,a);case 13:o=e.sent,this.hasResponse=!0,this.responseID=o._id,this.$q.notify({message:"Response Updated",position:"bottom-right",color:"positive"});case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),filterFn:function(e,t,n){t(""!==e?function(){var t=e.toLowerCase();n.options=n.origOptions.filter(function(e){return e.label.toLowerCase().indexOf(t)>-1})}:function(){n.options=n.origOptions})},searchUsers:function(){var e=l()(r.a.mark(function e(t,n,a){var s,o=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<2)){e.next=3;break}return a(),e.abrupt("return");case 3:return e.next=5,this.$sso.services.users.find({query:{$search:t}});case 5:s=e.sent,console.log(s.data),n(function(){o.searchedUsers=s.data.map(function(e){return delete e.training_programs,delete e.voluntary_work,delete e.work_experience,delete e.civil_service_eligibility,delete e.educational_background,delete e.family_background,delete e.other_information,delete e.extra_information.signature,{label:e.personal_information.first_name+" "+e.personal_information.surname,value:e}})});case 8:case"end":return e.stop()}},e,this)}));function t(t,n,a){return e.apply(this,arguments)}return t}()}},m=f,v=n("2877"),h=Object(v["a"])(m,a,s,!1,null,"141fc729",null);t["a"]=h.exports},d241:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.que?"Text"===e.que.type||"Text"===e.que.type.value?n("q-input",{attrs:{filled:"",label:e.que.field,type:"textarea",rows:1,rules:[function(t){return!e.que.isRequired||!!e.que.value||"Field is required"}],clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}}):"Number"===e.que.type.value?n("q-input",{attrs:{filled:"",label:e.que.field,type:"number",rules:[function(t){return!e.que.isRequired||!!e.que.value||"Field is required"}],clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",e._n(t))},expression:"que.value"}}):"Select"===e.que.type.value?n("div",[e._v("\n  "+e._s(""===e.que.value?(e.que.value=[],e.que.origOptions=e.$lodash.cloneDeep(e.que.options)):"")+"\n  "),e.que.isMultiple?n("q-select",{ref:"que-"+e.qi,attrs:{filled:"",options:e.que.options,label:e.que.field,multiple:"","use-chips":"","stack-label":"","use-input":"",rules:[function(t){return!e.que.isRequired||null!==e.que.value&&!!e.que.value.length||"Field is required"}],clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},on:{filter:function(t,n){return e.filterFn(t,n,e.que)},input:function(t){e.$refs["que-"+e.qi].updateInputValue("")}},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}}):n("q-select",{ref:"que-"+e.qi,attrs:{filled:"",options:e.que.options,label:e.que.field,"use-input":"",rules:[function(t){return!e.que.isRequired||!e.que.value||!!e.que.value.value||"Field is required"}],clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},on:{filter:function(t,n){return e.filterFn(t,n,e.que)},input:function(t){e.$log(e.qi),e.$refs["que-"+e.qi].hidePopup()}},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}})],1):"Rating"===e.que.type.value?n("q-field",{attrs:{value:e.que.value,label:e.que.field,"stack-label":"",filled:"",rules:[function(t){return!e.que.isRequired||!!e.que.value||"Field is required"}],"lazy-rules":"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},scopedSlots:e._u([{key:"control",fn:function(){return[e._v("\n    "+e._s(""===e.que.value?e.que.value=0:"")+"\n    "),n("q-rating",{attrs:{max:e.que.max,size:"3.5em",color:"purple",icon:"star_border","icon-selected":"star",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",e._n(t))},expression:"que.value"}})]},proxy:!0}])}):"Date"===e.que.type.value?n("q-input",{attrs:{filled:"",label:e.que.field,mask:"date",hint:"YYYY/MM/DD",rules:[function(t){return!e.que.isRequired||!!e.que.value||"Field is required"},function(e){return/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)||"Invalid Date"}],clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}},[n("q-menu",{ref:"qDateProxy",attrs:{anchor:"center middle",self:"center middle","transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},on:{input:function(){return e.$refs.qDateProxy.hide()}},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}})],1)],1):"Time"===e.que.type.value?n("q-input",{attrs:{filled:"",label:e.que.field,mask:"##:## AA",rules:[function(t){return!e.que.isRequired||!!e.que.value||"Field is required"},function(e){return/^([0-1]?\d|2[0-3]):[0-5]\d ([AaPp][Mm])$/.test(e)||"Invalid Date"}],hint:"hh:mm A",clearable:"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}})]},proxy:!0}]),model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}},[n("q-menu",{ref:"qTimeProxy",attrs:{anchor:"center middle",self:"center middle","transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse,mask:"hh:mm A"},on:{input:function(){return e.$refs.qTimeProxy.hide()}},model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}})],1)],1):"digiSign"===e.que.type.value?n("q-field",{attrs:{label:e.que.field,"stack-label":"",filled:"",rules:[function(t){return!e.que.isRequired||!e.que.value.hash||!!e.que.value.hash||"Field is required"}],"lazy-rules":"",readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse},scopedSlots:e._u([{key:"control",fn:function(){return[n("div",{staticClass:"col"},[n("div",{staticClass:"row justify-center"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("\n          "+e._s(e.que.value=e.que.value||{assignedTo:""})+"\n        ")]),n("q-select",{ref:"assignedTo",staticClass:"print-hide",attrs:{readonly:!e.node.multipleResponse&&!e.node.editableResponse&&e.hasResponse||e.response&&!e.node.editableResponse,options:e.searchedUsers,label:"Signer","use-input":"",clearable:""},on:{input:function(){return e.$refs.assignedTo.updateInputValue("")},filter:e.searchUsers},scopedSlots:e._u([e.que.value.assignedTo&&!e.que.value.hash?{key:"prepend",fn:function(){return[n("q-btn",{attrs:{color:"purple",icon:"notifications",round:""},on:{click:function(t){return e.notifySigner(e.que.value.assignedTo)}}},[n("q-tooltip",[e._v("\n                Notify "+e._s(e.que.value.assignedTo.label)+"\n              ")])],1)]},proxy:!0}:null],null,!0),model:{value:e.que.value.assignedTo,callback:function(t){e.$set(e.que.value,"assignedTo",t)},expression:"que.value.assignedTo"}}),n("q-btn",{staticClass:"self-center",staticStyle:{height:"70px"},attrs:{disabled:!e.node.multipleResponse&&e.response&&!e.node.editableResponse&&!e.que.value.assignedTo||e.que.value.assignedTo&&e.que.value.assignedTo.value&&e.que.value.assignedTo.value._id!==e.$root.user._id||!e.node.editableResponse&&e.que.value.hash,icon:"fas fa-signature",color:"purple"}},[e._v("\n             \n          "),null!==e.que.value&&e.que.value.displayName?n("span",[e._v("\n            "+e._s(e.que.value.displayName)+"\n            "),n("br"),e._v("\n            "+e._s(e.$moment(e.que.value.datetime).format("lll"))+"\n          ")]):n("span",[e._v("Sign")]),n("approve-dialog",{attrs:{signHandler:function(t){t&&e.sign(e.que)}}})],1),null!==e.que.value&&e.que.value.datetime?n("vue-qr",{attrs:{text:e.que.value.hash,size:100,margin:8}}):e._e()],1)])]},proxy:!0},e.node.editableResponse?{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(t){e.que.value={assignedTo:e.que.value.assignedTo||null}}}})]},proxy:!0}:null],null,!0),model:{value:e.que.value,callback:function(t){e.$set(e.que,"value",t)},expression:"que.value"}}):e._e():n("div",[e._v("none")])},s=[],o=(n("7514"),n("06db"),n("967e")),r=n.n(o),i=(n("96cf"),n("fa84")),l=n.n(i),u=n("658f"),c=n.n(u),d=n("4912"),p={components:{approveDialog:d["a"],VueQr:c.a},data:function(){return{que:!1,searchedUsers:[]}},props:["value","query","qi","node","response","hasResponse","format"],mounted:function(){this.que=this.query},watch:{"que.value":function(){console.log("changedd")}},methods:{notifySigner:function(){var e=l()(r.a.mark(function e(t){var n;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$host+"/#/myDrive/"+this.node.parentFolder+"?f="+this.node._id,this.$axios.post("".concat(this.$dbCon.io.io.uri,"/sendMail"),{to:t.value.personal_information.email,subject:"OnlineISO: ".concat(this.node.label),message:"\n          ".concat(this.$root.user.personal_information.first_name," ").concat(this.$root.user.personal_information.surname,'\n          notified you to sign\n          <i><a href="').concat(n,'">').concat(this.node.label,"</a></i> response\n        "),url:"".concat(n),html:{firstName:t.value.personal_information.first_name,message:"\n            ".concat(this.$root.user.personal_information.first_name," ").concat(this.$root.user.personal_information.surname,"\n            notified you to sign (").concat(this.node.label,")\n          "),url:{text:'Open "'+this.node.label+'"',link:n}}},{"Content-Type":"application/json"}),e.next=4,this.$dbCon.services["juan-notifs"].create({from:this.$root.user,to:t.value,action:"notified you to sign",access:"formNotification",data:this.node,timestamp:Date.now(),seen:!1});case 4:this.$q.notify({message:t.label+" was notified",position:"bottom",color:"purple",actions:[{icon:"close",color:"white",round:!0}]});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),sign:function(e){var t={};this.format.filter(function(e){return e.type.value&&"digiSign"!==e.type.value}).map(function(e){t[e.field]=e.value}),console.log(t);var n=Date.now();e.value={assignedTo:e.value.assignedTo,datetime:n,userId:this.$root.user._id,email:this.$root.user.personal_information.email,displayName:"".concat(this.$root.user.personal_information.first_name," ").concat(this.$root.user.personal_information.surname),hash:this.$lodash.md5(t.toString()+n+this.$root.user._id)},console.log(e.value),this.response&&this.response._id&&this.updateResponse()},filterFn:function(e,t,n){t(""!==e?function(){var t=e.toLowerCase();n.options=n.origOptions.filter(function(e){return e.label.toLowerCase().indexOf(t)>-1})}:function(){n.options=n.origOptions})},searchUsers:function(){var e=l()(r.a.mark(function e(t,n,a){var s,o=this;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<2)){e.next=3;break}return a(),e.abrupt("return");case 3:return e.next=5,this.$sso.services.users.find({query:{$search:t}});case 5:s=e.sent,console.log(s.data),n(function(){o.searchedUsers=s.data.map(function(e){return delete e.training_programs,delete e.voluntary_work,delete e.work_experience,delete e.civil_service_eligibility,delete e.educational_background,delete e.family_background,delete e.other_information,delete e.extra_information.signature,{label:e.personal_information.first_name+" "+e.personal_information.surname,value:e}})});case 8:case"end":return e.stop()}},e,this)}));function t(t,n,a){return e.apply(this,arguments)}return t}()}},f=p,m=n("2877"),v=Object(m["a"])(f,a,s,!1,null,null,null);t["a"]=v.exports},f070:function(e,t,n){"use strict";var a=n("54ba"),s=n.n(a);s.a}},[[1,"runtime","vendor"]]]);